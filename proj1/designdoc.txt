--KThread
function join
  assert thisThread != currentThread

  if status is finished
    return
  else
    jLock.acquire()
    disable interrupt
    currentThread.sleep()
    joinQueue.waitForAccess(thisThread)

end join

function finish
  disable interrupt
  assert toBeDestroyed is null
  toBeDestroyed := currentThread

  jLock.acquire()
  for thread in joinQueue
    thread.ready()
  jLock.release()

  currentThreadStatus := finished
  sleep()
end finish

In Condition2, we need to create a threadQueue object.

function sleep
  assert conditionLock.isHeldByCurrentThread()
  interrupt.disable()
  conditionLock.release()

  threadQueue.push(currentThread)
  currentThread.sleep()

  conditionLock.acquire()
  interrupt.enable()
end sleep

function wake
  assert conditionLock.isHeldByCurrentThread()
  interrupt.disable()

  thread := threadQueue.nextThread()
  if thread is not null
    thread.ready()

  interrupt.enable()
end wake

function wakeAll
  assert conditionLock.isHeldByCurrentThread()
  while threadQueue is not empty
    wake()
end wakeAll
** NOTE : May need to call interrupt.enable(), but I don't think we do. **

***************************** Alarm.java *****************************
Class for waiting threads that includes the thread and wake time, implements comparable.
heap data structure to store waiting threads in.

timerInterrupt will check if time >= wake time of top of the heap structure, if it is, it will move that thread to the ready queue and then loop to see if any other threads are ready to wake.

timerInterrupt(){
	if waiting heap is empty or the first elements time is greater than current time then return 			done;
	if the first elements time is less than the current time then
		while the first elements time is less than the current time do
			wake the thread and move it to the ready queue.
			restructure heap if necessary
		done
	done
	KThread.currentThread().yield();
} 
waitUntil(int x) {
	Disable interrupts
	Lose the lock
	wakeTime = clock time + x	
	create new waiting thread object including the current thread and wake time. 
	add the new waiting thread to the heap data structure.
	sleep the thread.
	enable interrupts 
}
**********************************************************************